{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link,useNavigate}from'react-router-dom';import{Button}from'./ui/button';import{Badge}from'./ui/badge';import{ShoppingCart,User,LogOut}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Header(){const[cartItemCount,setCartItemCount]=useState(0);const[isLoggedIn,setIsLoggedIn]=useState(false);const navigate=useNavigate();useEffect(()=>{// Update cart count\nconst updateCartCount=()=>{const cart=JSON.parse(localStorage.getItem('cart')||'[]');setCartItemCount(cart.reduce((total,item)=>total+item.quantity,0));};// Check if user is logged in\nconst token=localStorage.getItem('token');setIsLoggedIn(!!token);// Initial cart count\nupdateCartCount();// Listen for cart updates\nwindow.addEventListener('cartUpdated',updateCartCount);window.addEventListener('storage',updateCartCount);return()=>{window.removeEventListener('cartUpdated',updateCartCount);window.removeEventListener('storage',updateCartCount);};},[]);const handleLogout=()=>{localStorage.removeItem('token');localStorage.removeItem('user');setIsLoggedIn(false);navigate('/');};return/*#__PURE__*/_jsx(\"header\",{className:\"border-b bg-background sticky top-0 z-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto px-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex h-16 items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-8\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"text-2xl font-bold\",children:\"E-Store\"}),/*#__PURE__*/_jsxs(\"nav\",{className:\"hidden md:flex gap-6\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"text-sm font-medium transition-colors hover:text-primary\",children:\"Home\"}),/*#__PURE__*/_jsx(Link,{to:\"/products\",className:\"text-sm font-medium transition-colors hover:text-primary\",children:\"Products\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsx(Link,{to:\"/cart\",className:\"relative\",children:/*#__PURE__*/_jsxs(Button,{variant:\"ghost\",size:\"icon\",children:[/*#__PURE__*/_jsx(ShoppingCart,{className:\"h-5 w-5\"}),cartItemCount>0&&/*#__PURE__*/_jsx(Badge,{variant:\"destructive\",className:\"absolute -top-2 -right-2 h-5 w-5 flex items-center justify-center p-0\",children:cartItemCount})]})}),isLoggedIn?/*#__PURE__*/_jsx(Button,{variant:\"ghost\",size:\"icon\",onClick:handleLogout,children:/*#__PURE__*/_jsx(LogOut,{className:\"h-5 w-5\"})}):/*#__PURE__*/_jsx(Link,{to:\"/login\",children:/*#__PURE__*/_jsx(Button,{variant:\"ghost\",size:\"icon\",children:/*#__PURE__*/_jsx(User,{className:\"h-5 w-5\"})})})]})]})})});}export default Header;","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","Button","Badge","ShoppingCart","User","LogOut","jsx","_jsx","jsxs","_jsxs","Header","cartItemCount","setCartItemCount","isLoggedIn","setIsLoggedIn","navigate","updateCartCount","cart","JSON","parse","localStorage","getItem","reduce","total","item","quantity","token","window","addEventListener","removeEventListener","handleLogout","removeItem","className","children","to","variant","size","onClick"],"sources":["/workspace/5dlabs-cto-parallel-test/frontend/src/components/Header.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { Button } from './ui/button';\nimport { Badge } from './ui/badge';\nimport { ShoppingCart, User, LogOut } from 'lucide-react';\n\nfunction Header() {\n  const [cartItemCount, setCartItemCount] = useState(0);\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    // Update cart count\n    const updateCartCount = () => {\n      const cart = JSON.parse(localStorage.getItem('cart') || '[]');\n      setCartItemCount(cart.reduce((total, item) => total + item.quantity, 0));\n    };\n\n    // Check if user is logged in\n    const token = localStorage.getItem('token');\n    setIsLoggedIn(!!token);\n\n    // Initial cart count\n    updateCartCount();\n\n    // Listen for cart updates\n    window.addEventListener('cartUpdated', updateCartCount);\n    window.addEventListener('storage', updateCartCount);\n\n    return () => {\n      window.removeEventListener('cartUpdated', updateCartCount);\n      window.removeEventListener('storage', updateCartCount);\n    };\n  }, []);\n\n  const handleLogout = () => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('user');\n    setIsLoggedIn(false);\n    navigate('/');\n  };\n\n  return (\n    <header className=\"border-b bg-background sticky top-0 z-50\">\n      <div className=\"container mx-auto px-4\">\n        <div className=\"flex h-16 items-center justify-between\">\n          <div className=\"flex items-center gap-8\">\n            <Link to=\"/\" className=\"text-2xl font-bold\">\n              E-Store\n            </Link>\n            <nav className=\"hidden md:flex gap-6\">\n              <Link\n                to=\"/\"\n                className=\"text-sm font-medium transition-colors hover:text-primary\"\n              >\n                Home\n              </Link>\n              <Link\n                to=\"/products\"\n                className=\"text-sm font-medium transition-colors hover:text-primary\"\n              >\n                Products\n              </Link>\n            </nav>\n          </div>\n\n          <div className=\"flex items-center gap-4\">\n            <Link to=\"/cart\" className=\"relative\">\n              <Button variant=\"ghost\" size=\"icon\">\n                <ShoppingCart className=\"h-5 w-5\" />\n                {cartItemCount > 0 && (\n                  <Badge\n                    variant=\"destructive\"\n                    className=\"absolute -top-2 -right-2 h-5 w-5 flex items-center justify-center p-0\"\n                  >\n                    {cartItemCount}\n                  </Badge>\n                )}\n              </Button>\n            </Link>\n\n            {isLoggedIn ? (\n              <Button variant=\"ghost\" size=\"icon\" onClick={handleLogout}>\n                <LogOut className=\"h-5 w-5\" />\n              </Button>\n            ) : (\n              <Link to=\"/login\">\n                <Button variant=\"ghost\" size=\"icon\">\n                  <User className=\"h-5 w-5\" />\n                </Button>\n              </Link>\n            )}\n          </div>\n        </div>\n      </div>\n    </header>\n  );\n}\n\nexport default Header;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}