Task 1 Execution: Diesel/Postgres DB layer, security scans, and PR workflow

- Verified Diesel ORM + PostgreSQL setup is complete and production-ready:
  - Migrations applied to a live Postgres 16 (Docker) via `diesel setup && diesel migration run`
  - `src/schema.rs` generated by Diesel; matches tables and constraints
  - ORM models in `src/models.rs` with appropriate derives; `password_hash` excluded from serialization
  - Connection pooling in `src/config/db.rs` with env-driven, secure defaults

- Security posture aligned with coding-guidelines.md and security best practices:
  - Prices use NUMERIC in DB and `BigDecimal` in Rust (no floating-point drift)
  - Foreign keys include `ON DELETE CASCADE`
  - DB integrity constraints: non-negative price/inventory, positive quantity, unique `(cart_id, product_id)`
  - Case-insensitive unique indexes for username/email; length constraints to mitigate oversized inputs
  - No hardcoded secrets; `.env` gitignored; everything parameterized via env

- Local quality gates (all green):
  - `cargo fmt --all -- --check`
  - `cargo clippy --workspace --all-targets --all-features -- -D warnings -W clippy::pedantic`
  - `cargo test --workspace --all-features`
  - `cargo audit` (no vulnerabilities found)
  - `gitleaks detect --no-git` (no leaks in working tree)

- Live Postgres migration (local):
  - Started Postgres 16 via Docker:
    docker run -d --name ecommerce-db \
      -e POSTGRES_USER=postgres \
      -e POSTGRES_PASSWORD=postgres \
      -e POSTGRES_DB=ecommerce_db \
      -p 5432:5432 postgres:16-alpine
  - Applied migrations:
    DATABASE_URL=postgres://postgres:postgres@localhost:5432/ecommerce_db \
      diesel setup && diesel migration run

- GitHub code scanning:
  - CI includes CodeQL (`.github/workflows/codeql.yml`), `cargo audit`, and `gitleaks` (working-tree scan)
  - If GH auth is available, check PR alerts with:
    gh api "/repos/5dlabs/cto-parallel-test/code-scanning/alerts?state=open&pr=<PR_NUMBER>"

- PR creation (labels: task-1, service-cto-parallel-test, run-play-task-1-gh7g9):
  - Ensure youâ€™re on `feature/task-1-implementation` and changes are pushed
  - Create PR:
    gh pr create \
      --title "feat(db): Diesel/Postgres schema, models, pooling (Task 1)" \
      --body "Implements Diesel/Postgres schema, models, pooling. Passes fmt, clippy (pedantic), tests; cargo-audit and gitleaks clean. CI includes CodeQL and security scans." \
      --label task-1 --label service-cto-parallel-test --label run-play-task-1-gh7g9

- Notes:
  - Follow `github-guidelines.md` and `coding-guidelines.md` for conventions
  - Use `scripts/db/setup-local.sh` for a turnkey local DB + migrations setup
  - Use `scripts/security-scan.sh` to re-run local security checks

